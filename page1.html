<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…©ä½æ•¸ä¹˜æ³•ç·´ç¿’</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#8b5cf6',
                        'success': '#10b981',
                        'error': '#ef4444',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* ç¢ºä¿å­—é«”åœ¨ä¸åŒè¨­å‚™ä¸Šé¡¯ç¤ºè‰¯å¥½ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* è‡ªå®šç¾©è¼¸å…¥æ¡†æ¨£å¼ */
        .math-input {
            width: 100%;
            text-align: right;
            font-size: 2.5rem;
            padding: 0.5rem 1rem;
            border: 3px solid #ccc;
            transition: all 0.2s;
        }
        .math-input:focus {
            border-color: #4f46e5;
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.5);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-md bg-white p-8 rounded-xl shadow-2xl border border-gray-100">
        <h1 class="text-3xl font-bold text-center text-primary mb-6">
            å…©ä½æ•¸ä¹˜æ³•ç·´ç¿’
        </h1>

        <!-- å¾—åˆ†èˆ‡ç‹€æ…‹é¡¯ç¤ºå€ -->
        <div class="flex justify-between items-center mb-6 p-3 bg-gray-50 rounded-lg">
            <div class="text-lg font-medium text-gray-700">
                å¾—åˆ†: <span id="score" class="text-2xl font-extrabold text-success ml-1">0</span>
            </div>
            <div id="feedback" class="text-xl font-semibold text-center h-8 transition-opacity duration-300">
                <!-- ç­”å°/ç­”éŒ¯è¨Šæ¯æœƒåœ¨é€™è£¡é¡¯ç¤º -->
            </div>
        </div>

        <!-- é¡Œç›®é¡¯ç¤ºå€ -->
        <div class="mb-8 p-4 border-b-2 border-gray-300">
            <div class="flex flex-col items-end text-5xl font-mono font-bold text-gray-800 space-y-2">
                <!-- ä¹˜æ•¸ (2ä½æ•¸) -->
                <div id="num1-display" class="w-24 text-right">00</div>
                <!-- ä¹˜è™Ÿå’Œè¢«ä¹˜æ•¸ (1ä½æ•¸) -->
                <div class="flex items-center">
                    <span class="text-4xl mr-2">Ã—</span>
                    <span id="num2-display" class="w-24 text-right">0</span>
                </div>
            </div>
        </div>

        <!-- ç­”æ¡ˆè¼¸å…¥å€ -->
        <div class="mb-8">
            <label for="answerInput" class="block text-sm font-medium text-gray-700 mb-2">ä½ çš„ç­”æ¡ˆ</label>
            <input type="number" id="answerInput" class="math-input rounded-lg" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" onkeypress="handleKey(event)">
        </div>

        <!-- æŒ‰éˆ•å€ -->
        <div class="flex flex-col space-y-4">
            <button id="checkButton" onclick="checkAnswer()" class="w-full py-3 px-4 bg-primary text-white font-semibold rounded-lg shadow-lg hover:bg-secondary transition duration-150 transform hover:scale-[1.01] active:scale-[0.98] focus:outline-none focus:ring-4 focus:ring-primary focus:ring-opacity-50">
                æª¢æŸ¥ç­”æ¡ˆ
            </button>
            <button id="newButton" onclick="newProblem()" class="w-full py-3 px-4 bg-gray-300 text-gray-800 font-semibold rounded-lg hover:bg-gray-400 transition duration-150 focus:outline-none focus:ring-4 focus:ring-gray-400 focus:ring-opacity-50">
                æ–°é¡Œç›®
            </button>
        </div>
    </div>

    <script>
        // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹è®Šæ•¸
        let num1 = 0; // å…©ä½æ•¸ (10-99)
        let num2 = 0; // ä¸€ä½æ•¸ (1-9)
        let correctAnswer = 0;
        let score = 0;

        // DOM å…ƒç´ å¼•ç”¨
        const num1Display = document.getElementById('num1-display');
        const num2Display = document.getElementById('num2-display');
        const answerInput = document.getElementById('answerInput');
        const scoreDisplay = document.getElementById('score');
        const feedbackDisplay = document.getElementById('feedback');

        /**
         * ç”¢ç”Ÿä¸€å€‹æ–°çš„ä¹˜æ³•é¡Œç›®ä¸¦æ›´æ–° UI
         */
        function generateProblem() {
            // ç”¢ç”Ÿå…©ä½æ•¸ (10 åˆ° 99)
            num1 = Math.floor(Math.random() * 90) + 10;
            // ç”¢ç”Ÿä¸€ä½æ•¸ (1 åˆ° 9)
            num2 = Math.floor(Math.random() * 9) + 1;
            correctAnswer = num1 * num2;

            // æ›´æ–° UI é¡¯ç¤º
            num1Display.textContent = num1;
            num2Display.textContent = num2;
            answerInput.value = '';
            answerInput.focus();
            
            // æ¸…é™¤ä¹‹å‰çš„éŒ¯èª¤è¨Šæ¯å’Œæ¨£å¼
            clearFeedback();
        }

        /**
         * æª¢æŸ¥ä½¿ç”¨è€…è¼¸å…¥çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¢º
         */
        function checkAnswer() {
            const userAnswer = parseInt(answerInput.value, 10);

            // æª¢æŸ¥è¼¸å…¥æ˜¯å¦æœ‰æ•ˆ
            if (isNaN(userAnswer)) {
                showFeedback("è«‹å…ˆè¼¸å…¥ä¸€å€‹æ•¸å­—ã€‚", 'text-error');
                return;
            }

            if (userAnswer === correctAnswer) {
                // ç­”å°äº†
                score++;
                scoreDisplay.textContent = score;
                showFeedback("ç­”å°äº†ï¼ğŸ‰", 'text-success');

                // ç­”å°å¾Œç«‹å³è¼‰å…¥æ–°é¡Œç›®
                // ä½¿ç”¨ setTimeout è®“ä½¿ç”¨è€…èƒ½çœ‹åˆ°ã€Œç­”å°äº†ã€çš„è¨Šæ¯
                setTimeout(generateProblem, 1000);
            } else {
                // ç­”éŒ¯äº†
                showFeedback("ç­”éŒ¯äº†ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚", 'text-error');
                // å¯ä»¥é¸æ“‡ä¸æ¸…ç©ºè¼¸å…¥æ¡†ï¼Œè®“å­¸ç”Ÿæœ‰æ©Ÿæœƒè¨‚æ­£
                answerInput.focus(); 
            }
        }

        /**
         * é¡¯ç¤ºå›é¥‹è¨Šæ¯ä¸¦è¨­å®šæ¨£å¼
         * @param {string} message - è¦é¡¯ç¤ºçš„è¨Šæ¯
         * @param {string} className - Tailwind CSS é¡å (ä¾‹å¦‚: 'text-success', 'text-error')
         */
        function showFeedback(message, className) {
            // ç§»é™¤æ‰€æœ‰é¡è‰²é¡åˆ¥
            feedbackDisplay.className = 'text-xl font-semibold text-center h-8 transition-opacity duration-300';
            // åŠ ä¸Šæ–°çš„é¡è‰²é¡åˆ¥å’Œè¨Šæ¯
            feedbackDisplay.classList.add(className, 'opacity-100');
            feedbackDisplay.textContent = message;

            // è¨­å®šè¨ˆæ™‚å™¨ï¼Œåœ¨ä¸€æ®µæ™‚é–“å¾Œæ¸…é™¤è¨Šæ¯ (ç­”éŒ¯æ™‚)
            if (className.includes('error')) {
                setTimeout(clearFeedback, 3000);
            }
        }

        /**
         * æ¸…é™¤å›é¥‹è¨Šæ¯
         */
        function clearFeedback() {
             feedbackDisplay.classList.remove('opacity-100', 'text-success', 'text-error');
             feedbackDisplay.classList.add('opacity-0');
             feedbackDisplay.textContent = '';
        }

        /**
         * è™•ç†éµç›¤äº‹ä»¶ï¼Œç‰¹åˆ¥æ˜¯ Enter éµ
         * @param {KeyboardEvent} event - éµç›¤äº‹ä»¶ç‰©ä»¶
         */
        function handleKey(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }

        /**
         * å¼·åˆ¶ç”Ÿæˆä¸€å€‹æ–°é¡Œç›® (ç”¨æ–¼ã€Œæ–°é¡Œç›®ã€æŒ‰éˆ•)
         */
        function newProblem() {
            clearFeedback();
            generateProblem();
        }

        /**
         * æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•æ™‚çš„åˆå§‹åŒ–
         */
        window.onload = function() {
            // åˆå§‹åŒ–æ™‚ç”¢ç”Ÿç¬¬ä¸€å€‹é¡Œç›®
            generateProblem();

            // ç¢ºä¿ Enter éµåœ¨è¼¸å…¥æ¡†ä¸­æŒ‰ä¸‹æ™‚èƒ½æª¢æŸ¥ç­”æ¡ˆ
            answerInput.addEventListener('keypress', handleKey);

            console.log("å…©ä½æ•¸ä¹˜æ³•ç·´ç¿’æ‡‰ç”¨ç¨‹å¼å·²å•Ÿå‹•ã€‚");
        };
    </script>
</body>
</html>
